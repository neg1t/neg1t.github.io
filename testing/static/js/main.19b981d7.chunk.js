(this.webpackJsonptesting=this.webpackJsonptesting||[]).push([[0],{31:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c.n(n),i=c(12),a=c.n(i),s=c(6),u=(c(31),c(1)),d=Object(s.b)((function(e){return{shadow:e.chequesReducers.deletingActivate}}))((function(e){var t=e.shadow;return Object(u.jsx)("header",{children:Object(u.jsx)("div",{className:"header ".concat(t?"shadow":""),children:Object(u.jsx)("h1",{children:"Solution Factory Test App"})})})})),o=c(7),j=c(3),l=c.n(j),b=c(4),h=c(2),O=c(8),m="FETCH_CHEQUES",f="DELETE_CHEQUE",x="DELETING_STATUS",p="ADD_CHECK",v={cheques:[],deletingActivate:!1},g=function(e){return{type:m,data:e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(O.a)(Object(O.a)({},e),{},{cheques:[].concat(Object(h.a)(e.cheques),Object(h.a)(t.data))});case f:var c=t.id;return Object(O.a)(Object(O.a)({},e),{},{cheques:e.cheques.filter((function(e){return e.uid!==c}))});case x:return Object(O.a)(Object(O.a)({},e),{},{deletingActivate:!e.deletingActivate});case p:return Object(O.a)(Object(O.a)({},e),{},{cheques:[].concat(Object(h.a)(e.cheques),Object(h.a)(t.cheque))});default:return e}},q=c(38),N=function(e,t){var c=C(e);return c===t?"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e":c<t?"\u041d\u0435\u0434\u043e\u043f\u043b\u0430\u0442\u0430":"\u041d\u0435\u0442 \u043e\u043f\u043b\u0430\u0442\u044b"},C=function(e){for(var t=0,c=0;c<e.length;c++)t+=e[c].sum;return t},_=function(e){for(var t=0,c=0;c<e.length;c++)t+=e[c].quantity;return t},w=function(e){for(var t=[],c=0;c<e.length;c++)t.push(e[c].name);return t.join(", ")},S=c(20),k=[{id:1,name:"\u041c\u043e\u0440\u0441 \u043a\u043b\u044e\u043a\u0432\u0430 \u0438\u0437 \u0432\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438",price:4500},{id:2,name:"\u0421\u044b\u0440\u043d\u0438\u043a\u0438 2\u0448\u0442",price:5900},{id:3,name:"\u041b\u0430\u043f\u0448\u0430 \u043f\u043e-\u043f\u0435\u043a\u0438\u043d\u0441\u043a\u0438",price:14900},{id:4,name:"\u041a\u0443\u0440\u0438\u043d\u043e\u0435 \u0444\u0438\u043b\u0435",price:11900},{id:5,name:"\u0411\u043b\u0438\u043d\u044b \u0441 \u0442\u0432\u043e\u0440\u043e\u0433\u043e\u043c",price:4900}],E=(c(34),Object(s.b)((function(e){return{}}),{addNewCheck:function(e){return function(t){t(function(e){return{type:p,cheque:e}}(e))}}})((function(e){var t=e.active,c=e.update,n=e.addNewCheck,r=Object(S.a)(),i=r.register,a=r.handleSubmit,s=function(){c(!1)};return Object(u.jsx)("section",{className:"fixed-overlay fixed-overlay_modal ".concat(t?"modal_active":""),children:Object(u.jsx)("div",{className:"modal",children:Object(u.jsxs)("div",{className:"modal-container",children:[Object(u.jsx)("div",{className:"modal__header",children:Object(u.jsx)("span",{onClick:s,className:"close",children:"X"})}),Object(u.jsx)("div",{className:"modal__main",children:Object(u.jsxs)("form",{action:"",method:"POST",onSubmit:a((function(e,t){var c=function(e,t){var c=Number(e.cardsum),n=Number(e.product),r=Number(e.count),i=new Date,a=t.find((function(e){return e.id===n})),s=a.price*r,u=c-s,d=0;return u<0?d=c:u>=0&&(d=s),[{pays:[{sum:d}],positions:[{name:a.name,price:a.price,quantity:r,sum:s}],uid:Object(q.a)(),sum:s,chequeType:0,dateReg:i,kioskName:"\u041a\u0438\u043e\u0441\u043a \u2116 11"}]}(e,k);n(c),t.target.reset(),s()})),className:"modal-form",children:[Object(u.jsx)("label",{htmlFor:"cardsum",children:"Money on card"}),Object(u.jsx)("input",{className:"form-styling",type:"number",name:"cardsum",ref:i({required:!0})}),Object(u.jsx)("label",{htmlFor:"product",children:"Chose product"}),Object(u.jsxs)("select",{name:"product",className:"selector",ref:i({required:!0}),children:[Object(u.jsx)("option",{hidden:!0,value:"default",children:"Products..."}),k.map((function(e){return Object(u.jsxs)("option",{value:e.id,children:[e.name," (",e.price,")"]},e.id)}))]}),Object(u.jsx)("label",{htmlFor:"count",children:"Produce count"}),Object(u.jsx)("input",{className:"form-styling",type:"number",name:"count",ref:i({required:!0})}),Object(u.jsxs)("div",{className:"modal-form__buttons",children:[Object(u.jsx)("button",{className:"cancel-button",type:"button",onClick:s,children:"Cancel"}),Object(u.jsx)("button",{className:"buy-button",type:"submit",children:"Buy"})]})]})})]})})})}))),D=(c(35),{getCheques:function(){return function(){var e=Object(b.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("api/data.json").then((function(e){return e.json()})).then((function(e){t(g(e.data.cheques))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},deleteOneCheque:function(e){return function(t){t(function(e){return{type:f,id:e}}(e))}},changeDeletingStatus:function(){return function(e){e({type:x})}}}),T=Object(s.b)((function(e){return{cheques:e.chequesReducers.cheques,deletingStatus:e.chequesReducers.deletingActivate}}),D)((function(e){var t=e.cheques,c=e.getCheques,r=e.deleteOneCheque,i=e.changeDeletingStatus,a=e.deletingStatus,s=Object(n.useState)({active:!1,text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),d=Object(o.a)(s,2),j=d[0],l=d[1],b=Object(n.useState)(!1),h=Object(o.a)(b,2),O=h[0],m=h[1];Object(n.useEffect)((function(){0===t.length&&c()}),[t,c]);return Object(u.jsxs)("div",{className:"main-table",children:[Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043a\u0443\u043f\u043a\u0438"}),Object(u.jsx)("th",{children:"\u041a\u0438\u043e\u0441\u043a"}),Object(u.jsx)("th",{children:"\u0422\u0438\u043f"}),Object(u.jsx)("th",{children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u043e\u043f\u043b\u0430\u0442\u044b"}),Object(u.jsx)("th",{children:"\u041e\u043f\u043b\u0430\u0442\u0430"}),Object(u.jsx)("th",{children:"\u0421\u0443\u043c\u043c\u0430"}),Object(u.jsx)("th",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u043e\u0432\u0430\u0440\u043e\u0432"}),Object(u.jsx)("th",{children:"\u0422\u043e\u0432\u0430\u0440\u044b"})]})}),Object(u.jsx)("tbody",{children:t.map((function(e){return Object(u.jsxs)("tr",{onClick:function(){return t=e.uid,void(a&&r(t));var t},className:a?"table-row_active":"",children:[Object(u.jsx)("td",{children:(c=e.dateReg,new Date(c).toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}),Object(u.jsx)("td",{children:e.kioskName}),Object(u.jsx)("td",{children:(t=e.chequeType,1===t?"\u0412\u043e\u0437\u0432\u0440\u0430\u0442":"\u041f\u0440\u043e\u0434\u0430\u0436\u0430")}),Object(u.jsx)("td",{children:N(e.pays,e.sum)}),Object(u.jsx)("td",{children:C(e.pays)}),Object(u.jsx)("td",{children:e.sum}),Object(u.jsx)("td",{children:_(e.positions)}),Object(u.jsx)("td",{children:w(e.positions)})]},e.uid);var t,c}))})]}),Object(u.jsxs)("div",{className:"main-table__buttons",children:[Object(u.jsx)("button",{className:"main-table__cancel-button",onClick:function(){i(),j.active?l({active:!1,text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}):l({active:!0,text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})},children:j.text}),Object(u.jsx)("button",{className:"main-table__create-button",onClick:function(){O||m(!0)},children:"Create"})]}),O&&Object(u.jsx)(E,{active:O,update:function(e){m(e)}})]})})),A=function(){return Object(u.jsx)("section",{className:"container table-section",children:Object(u.jsx)(T,{})})},R=Object(s.b)((function(e){return{shadow:e.chequesReducers.deletingActivate}}))((function(e){var t=e.shadow;return Object(u.jsxs)("main",{className:t?"shadow":"",children:[Object(u.jsx)(d,{}),Object(u.jsx)(A,{})]})})),F=c(9),H=c(18),U=c(19),L=Object(F.combineReducers)({chequesReducers:y}),M=Object(F.createStore)(L,Object(H.composeWithDevTools)(Object(F.applyMiddleware)(U.a)));a.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(s.a,{store:M,children:Object(u.jsx)(R,{})})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.19b981d7.chunk.js.map